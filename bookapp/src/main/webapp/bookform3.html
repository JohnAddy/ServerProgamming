<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<!-- <form action = '/rest/bookservice/addbook' method='Post'> -->
<form>
name: <input type ='text' name='name' value='' placeholder='name here'><br>
Pages:<input type ='text' name='pages' value='' placeholder= 'pages here'><br>
<input type='button' name='ok' value='Send' onclick='sendDataWithJavascript(this.form);'><br>
<input type='button' name='ok' value='Get All' onclick='getData();'><br>
<input type='button' name='ok' value='Get One' onclick='getData1();'><br>
</form>


<p id='response'>
Response comes here!
</p>

<p id='result'>
Result comes here!
</p>



<p id='response'>
Get one book here!
</p>

<p id='oneresult'>
Get one book here!
</p>



<p id='result2'>
Result 2 comes here!
</p>

<script>
function sendDataWithJavascript(form) {
    var book=new Object();
    book.name=form.name.value;
    book.pages=form.pages.value;
//    laptop.weight=form.weight.value;
   
   // var jsonBook=JSON.stringify(book);
    var json=JSON.stringify(book);
       
   
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
       document.getElementById("response").innerHTML = this.responseText;
      }
    };
    xhttp.open("POST", "/rest/bookservice/addbook", true);
//    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.setRequestHeader("Content-type", "application/json");
   
    //xhttp.send(jsonBook);
    xhttp.send(json);
    
    
}
//:::::::::::::::::::::GetOne::::::::::::::::::::::::::::::::

function getData1(){
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        //Ensin result-kenttään JSON sellaisenaan
        var tulos=this.responseText;
        document.getElementById("oneresult").innerHTML = tulos;
        //Sitten puretaan se Javascript oliotaulukoksi
         booklist = JSON.parse(tulos);
        var txt="";
        //Käydään taulukko läpi yksi kerrallaan ja liitetään
        //muuttujaan txt kunkin yksittäisen olion arvot
        for (index in booklist){
              txt += booklist[index].name + "<br>";
             txt += booklist[index].pages + "<br>";
//txt += laptoplist[index].weight + "<br>";
        }
       
        //The same with normal for-statement
/*        for (i=0;i<laptoplist.length;i++){
              txt += laptoplist[i].brand + "<br>";
             txt += laptoplist[i].price + "<br>";
            txt += laptoplist[i].weight + "<br>";
        }
*/       
        //Lisätään saatu merkkijono kenttään result2
         document.getElementById("result2").innerHTML = txt;
       }
    };
    xmlhttp.open("GET", "/rest/bookservice/getbook/2", true);
    xmlhttp.send();   
}

//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
	
function getData(){
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        //Ensin result-kenttään JSON sellaisenaan
        var tulos=this.responseText;
        document.getElementById("result").innerHTML = tulos;
        //Sitten puretaan se Javascript oliotaulukoksi
         booklist = JSON.parse(tulos);
        var txt="";
        //Käydään taulukko läpi yksi kerrallaan ja liitetään
        //muuttujaan txt kunkin yksittäisen olion arvot
        for (index in booklist){
              txt += booklist[index].name + "<br>";
             txt += booklist[index].pages + "<br>";
//txt += laptoplist[index].weight + "<br>";
        }
       
        //The same with normal for-statement
/*        for (i=0;i<laptoplist.length;i++){
              txt += laptoplist[i].brand + "<br>";
             txt += laptoplist[i].price + "<br>";
            txt += laptoplist[i].weight + "<br>";
        }
*/       
        //Lisätään saatu merkkijono kenttään result2
         document.getElementById("result2").innerHTML = txt;
       }
    };
    xmlhttp.open("GET", "/rest/bookservice/getbook/2", true);
    xmlhttp.send();   
}

</script>
</body>
</html>

